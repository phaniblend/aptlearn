{
  "id": "trapping-rain-water",
  "title": "Trapping rain water",
  "pattern": "two-pointers",
  "difficulty": "hard",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what the Trapping Rain Water problem asks for\n2. Use two pointers to calculate trapped water efficiently\n3. Calculate water trapped at each position based on min of left/right max heights\n4. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what the Trapping Rain Water problem is asking.\n\nImagine you have an array representing heights of bars: [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]\n\nVisual representation:\n         |\n    |    |  |\n| _ |  | | | |\n0 1 0 2 1 0 1 3 2 1 2 1\n\nYour task: Calculate how much rainwater can be trapped between the bars.\n\nAt each position, water can be trapped if there are bars on both sides that are taller. The amount of water trapped at position i is:\nmin(max height to the left, max height to the right) - height[i]\n\nLet's calculate for position 2 (height = 0):\n- Max height to the left: max(0, 1) = 1\n- Max height to the right: max(2, 1, 0, 1, 3, 2, 1, 2, 1) = 3\n- Water trapped: min(1, 3) - 0 = 1\n\nLet's calculate for position 4 (height = 1):\n- Max height to the left: max(0, 1, 0, 2) = 2\n- Max height to the right: max(0, 1, 3, 2, 1, 2, 1) = 3\n- Water trapped: min(2, 3) - 1 = 1\n\nTotal water trapped: 6 units\n\nThat's what the problem wants: the total amount of rainwater that can be trapped.",
      "example": "height = [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]\n\nVisual:\n         |\n    |    |  |\n| _ |  | | | |\n0 1 0 2 1 0 1 3 2 1 2 1\n\nWater trapped at each position:\n- Position 0: 0 (no left bar)\n- Position 1: 0 (no water)\n- Position 2: 1 (trapped between 1 and 2)\n- Position 3: 0 (bar itself)\n- Position 4: 1 (trapped between 2 and 3)\n- Position 5: 2 (trapped between 2 and 3)\n- Position 6: 1 (trapped between 2 and 3)\n- Position 7: 0 (bar itself)\n- Position 8: 0 (no water)\n- Position 9: 1 (trapped between 3 and 2)\n- Position 10: 0 (no water)\n- Position 11: 0 (no right bar)\n\nTotal: 6",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what the problem wants, here's the real question:\n\nHow would YOU calculate the trapped water?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "For each position, find max left and max right, then calculate water",
          "next": "explore-brute-force"
        },
        {
          "label": "Use two pointers from both ends, moving the shorter one",
          "next": "explore-two-pointers"
        },
        {
          "label": "Use a stack to track decreasing heights",
          "next": "explore-stack"
        }
      ]
    },
    {
      "stepId": "explore-brute-force",
      "mentorSays": "That's a straightforward approach! You're thinking: \"For each position, I'll find the maximum height to the left and right, then calculate the water trapped.\"\n\nFor [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]:\n- At position 2: leftMax = 1, rightMax = 3, water = min(1, 3) - 0 = 1\n- At position 4: leftMax = 2, rightMax = 3, water = min(2, 3) - 1 = 1\n- ... and so on\n\nThis works! However, it's O(nÂ²) time complexity because for each position, we scan left and right.\n\nWould you like to learn the two pointers approach which is O(n) time?",
      "choices": [
        {
          "label": "Yes, teach me the two pointers approach",
          "next": "explore-two-pointers"
        },
        {
          "label": "No, I want to code the brute force first",
          "next": "language-selection-brute"
        }
      ]
    },
    {
      "stepId": "explore-stack",
      "mentorSays": "Interesting! Using a stack is a clever approach. You're thinking: \"I can use a stack to track decreasing heights and calculate water when I find a taller bar.\"\n\nThis works well! However, the two pointers approach is simpler and more intuitive for this problem. Would you like to learn that?",
      "action": "continue",
      "next": "explore-two-pointers"
    },
    {
      "stepId": "explore-two-pointers",
      "mentorSays": "Excellent choice! The two pointers approach is elegant and efficient. Here's the core idea:\n\n1. **Two pointers**: Start with left = 0 and right = n-1\n2. **Track max heights**: Keep track of maxLeft and maxRight\n3. **Move the shorter pointer**: Always move the pointer pointing to the shorter bar\n4. **Calculate water**: At each position, water = min(maxLeft, maxRight) - height[i]\n\nWhy move the shorter pointer? Because the water level is limited by the shorter side. If left is shorter, we know the right side has at least one bar as tall as maxRight, so we can safely calculate water on the left.\n\nLet's trace this with [0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]:\n\n- **Initial**: left = 0, right = 11, maxLeft = 0, maxRight = 1, water = 0\n- **left < right, height[left] < height[right]**: Move left\n  - left = 1, maxLeft = 1, water += 0 (height[1] = 1, no water)\n- **left < right, height[left] < height[right]**: Move left\n  - left = 2, water += min(1, 1) - 0 = 1\n- **left < right, height[left] > height[right]**: Move right\n  - right = 10, maxRight = 2, water += 0\n- Continue until left >= right\n\nThis is O(n) time and O(1) space! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "main-variables-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-next-js"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in JavaScript, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-js"
    },
    {
      "stepId": "main-functions-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-next-js"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-js",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-js"
    },
    {
      "stepId": "main-parameters-check-js",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-next-js"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-js",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-js"
    },
    {
      "stepId": "main-loops-check-js",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "main-next-js"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-js",
      "mentorSays": "A loop lets you repeat code multiple times. A 'for' loop in JavaScript runs code for each item in a sequence.\n\nFor example, you can loop through an array to check each element one by one.",
      "example": "for (let i = 0; i < arr.length; i++) {\n  // Process arr[i]\n}",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement the trapping rain water solution using two pointers in JavaScript.",
      "example": "function trap(height) {\n  // Your code here\n}",
      "action": "continue",
      "next": "coding-init-pointers-js"
    },
    {
      "stepId": "coding-init-pointers-js",
      "mentorSays": "First, initialize two pointers and variables to track max heights and water.",
      "example": "function trap(height) {\n  let left = 0;\n  let right = height.length - 1;\n  let maxLeft = 0;\n  let maxRight = 0;\n  let water = 0;\n}",
      "action": "continue",
      "next": "coding-while-loop-js"
    },
    {
      "stepId": "coding-while-loop-js",
      "mentorSays": "Now, create a while loop that continues while left < right. Inside, we'll move the pointer pointing to the shorter bar.",
      "example": "function trap(height) {\n  let left = 0, right = height.length - 1;\n  let maxLeft = 0, maxRight = 0;\n  let water = 0;\n  \n  while (left < right) {\n    // Move the shorter pointer\n  }\n}",
      "action": "continue",
      "next": "coding-compare-move-js"
    },
    {
      "stepId": "coding-compare-move-js",
      "mentorSays": "Compare heights at left and right. If height[left] < height[right], move left pointer and calculate water. Otherwise, move right pointer.",
      "example": "function trap(height) {\n  let left = 0, right = height.length - 1;\n  let maxLeft = 0, maxRight = 0;\n  let water = 0;\n  \n  while (left < right) {\n    if (height[left] < height[right]) {\n      if (height[left] >= maxLeft) {\n        maxLeft = height[left];\n      } else {\n        water += maxLeft - height[left];\n      }\n      left++;\n    } else {\n      if (height[right] >= maxRight) {\n        maxRight = height[right];\n      } else {\n        water += maxRight - height[right];\n      }\n      right--;\n    }\n  }\n  return water;\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Test with height = [0,1,0,2,1,0,1,3,2,1,2,1]. Expected: 6.",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-next-python"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in Python, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-python"
    },
    {
      "stepId": "main-functions-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-next-python"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-python",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-python"
    },
    {
      "stepId": "main-parameters-check-python",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-next-python"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-python",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-python"
    },
    {
      "stepId": "main-loops-check-python",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in Python?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "main-next-python"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-python",
      "mentorSays": "A loop lets you repeat code multiple times. A 'for' loop in Python runs code for each item in a sequence.\n\nFor example, you can loop through an array to check each element one by one.",
      "example": "for (let i = 0; i < arr.length; i++) {\n  // Process arr[i]\n}",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement the trapping rain water solution using two pointers in Python.",
      "example": "def trap(height):\n    # Your code here\n    pass",
      "action": "continue",
      "next": "coding-complete-python"
    },
    {
      "stepId": "coding-complete-python",
      "mentorSays": "Implement the two pointers solution: initialize left, right, maxLeft, maxRight, water. Then while left < right, move the shorter pointer and calculate water.",
      "example": "def trap(height):\n    left, right = 0, len(height) - 1\n    max_left, max_right = 0, 0\n    water = 0\n    \n    while left < right:\n        if height[left] < height[right]:\n            if height[left] >= max_left:\n                max_left = height[left]\n            else:\n                water += max_left - height[left]\n            left += 1\n        else:\n            if height[right] >= max_right:\n                max_right = height[right]\n            else:\n                water += max_right - height[right]\n            right -= 1\n    \n    return water",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Test with height = [0,1,0,2,1,0,1,3,2,1,2,1]. Expected: 6.",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-next-java"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in Java, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-java"
    },
    {
      "stepId": "main-functions-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a method is in Java?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-next-java"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-java",
      "mentorSays": "A method is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the method does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-java"
    },
    {
      "stepId": "main-parameters-check-java",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-next-java"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-java",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-java"
    },
    {
      "stepId": "main-loops-check-java",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in Java?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "main-next-java"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-java",
      "mentorSays": "A loop lets you repeat code multiple times. A 'for' loop in Java runs code for each item in a sequence.\n\nFor example, you can loop through an array to check each element one by one.",
      "example": "for (let i = 0; i < arr.length; i++) {\n  // Process arr[i]\n}",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement the trapping rain water solution using two pointers in Java.",
      "example": "public int trap(int[] height) {\n    int left = 0, right = height.length - 1;\n    int maxLeft = 0, maxRight = 0;\n    int water = 0;\n    \n    while (left < right) {\n        if (height[left] < height[right]) {\n            if (height[left] >= maxLeft) {\n                maxLeft = height[left];\n            } else {\n                water += maxLeft - height[left];\n            }\n            left++;\n        } else {\n            if (height[right] >= maxRight) {\n                maxRight = height[right];\n            } else {\n                water += maxRight - height[right];\n            }\n            right--;\n        }\n    }\n    return water;\n}",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Test with height = [0,1,0,2,1,0,1,3,2,1,2,1]. Expected: 6.",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-next-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in C++, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-cpp"
    },
    {
      "stepId": "main-functions-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-next-cpp"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-cpp",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-cpp"
    },
    {
      "stepId": "main-parameters-check-cpp",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-next-cpp"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-cpp",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-cpp"
    },
    {
      "stepId": "main-loops-check-cpp",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in C++?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "main-next-cpp"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-cpp",
      "mentorSays": "A loop lets you repeat code multiple times. A 'for' loop in C++ runs code for each item in a sequence.\n\nFor example, you can loop through an array to check each element one by one.",
      "example": "for (let i = 0; i < arr.length; i++) {\n  // Process arr[i]\n}",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement the trapping rain water solution using two pointers in C++.",
      "example": "int trap(vector<int>& height) {\n    int left = 0, right = height.size() - 1;\n    int maxLeft = 0, maxRight = 0;\n    int water = 0;\n    \n    while (left < right) {\n        if (height[left] < height[right]) {\n            if (height[left] >= maxLeft) {\n                maxLeft = height[left];\n            } else {\n                water += maxLeft - height[left];\n            }\n            left++;\n        } else {\n            if (height[right] >= maxRight) {\n                maxRight = height[right];\n            } else {\n                water += maxRight - height[right];\n            }\n            right--;\n        }\n    }\n    return water;\n}",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Test with height = [0,1,0,2,1,0,1,3,2,1,2,1]. Expected: 6.",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-next-ts"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in TypeScript, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-ts"
    },
    {
      "stepId": "main-functions-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-next-ts"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-ts",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-ts"
    },
    {
      "stepId": "main-parameters-check-ts",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-next-ts"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-ts",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-ts"
    },
    {
      "stepId": "main-loops-check-ts",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "main-next-ts"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-ts",
      "mentorSays": "A loop lets you repeat code multiple times. A 'for' loop in TypeScript runs code for each item in a sequence.\n\nFor example, you can loop through an array to check each element one by one.",
      "example": "for (let i = 0; i < arr.length; i++) {\n  // Process arr[i]\n}",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement the trapping rain water solution using two pointers in TypeScript.",
      "example": "function trap(height: number[]): number {\n  let left = 0, right = height.length - 1;\n  let maxLeft = 0, maxRight = 0;\n  let water = 0;\n  \n  while (left < right) {\n    if (height[left] < height[right]) {\n      if (height[left] >= maxLeft) {\n        maxLeft = height[left];\n      } else {\n        water += maxLeft - height[left];\n      }\n      left++;\n    } else {\n      if (height[right] >= maxRight) {\n        maxRight = height[right];\n      } else {\n        water += maxRight - height[right];\n      }\n      right--;\n    }\n  }\n  return water;\n}",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Test with height = [0,1,0,2,1,0,1,3,2,1,2,1]. Expected: 6.",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "test-code",
      "mentorSays": "Perfect! Now try running your code with the example input. Test it to make sure it produces the expected output!",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've completed this lesson. Practice more to master this pattern!",
      "action": "continue"
    }
  ]
}